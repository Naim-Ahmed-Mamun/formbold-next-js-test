import { useRouter } from 'next/navigation';
import React, { useState } from "react";
import { useDispatch } from "react-redux";

import { getAllForms, resetCurrentForm } from "../../actions/FormAction";
import CreateModal from "../Forms/CreateModal";

const CreateFormBar = (props) => {
  const { isFormsPage } = props;
  const router = useRouter();
  const dispatch = useDispatch();

  const [showFormCreateModal, setShowFormCreateModal] = useState(false);

  const refetchAllForms = () => {
    dispatch(getAllForms());
  };
  const handelCreateNewForm = () => {
    dispatch(resetCurrentForm());
    router.push("/account/dashboard");
  };

  const handelOpenCustomCreateModal = (e) => {
    e.preventDefault();
    setShowFormCreateModal(true);
  };
  return (
    <>
      <div className="mb-9 flex items-center justify-between rounded-xl bg-white p-5 shadow-fb-one">
        <div>
          <button onClick={() => refetchAllForms()}>
            <a className="inline-flex h-10 items-center justify-center rounded-lg border border-primary bg-white px-5 font-heading text-sm font-medium text-primary">
              <span className="pr-2">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M5.71737 1.042C5.74217 1.042 5.7673 1.04201 5.79277 1.04201L5.8236 1.042C6.11645 1.04198 6.30491 1.04197 6.48915 1.0592C7.2407 1.12948 7.95561 1.41308 8.55017 1.87534H13.7513C13.7676 1.87534 13.7837 1.87534 13.7995 1.87533C14.1401 1.87528 14.372 1.87524 14.5759 1.90207C15.9782 2.08669 17.0816 3.19015 17.2662 4.59245C17.2732 4.6453 17.2784 4.70004 17.2822 4.75808C17.5134 4.86348 17.7275 4.99978 17.9244 5.17687C18.0064 5.25059 18.0844 5.32861 18.1581 5.41058C18.5983 5.90004 18.7865 6.49582 18.8746 7.197C18.9597 7.87358 18.9597 8.72872 18.9597 9.78949V11.714C18.9597 13.2455 18.9597 14.4585 18.832 15.4079C18.7007 16.3849 18.4239 17.1757 17.8003 17.7993C17.1766 18.4229 16.3859 18.6997 15.4088 18.8311C14.4595 18.9587 13.2465 18.9587 11.715 18.9587H8.28764C6.75617 18.9587 5.54314 18.9587 4.5938 18.8311C3.61678 18.6997 2.82599 18.4229 2.20235 17.7993C1.57872 17.1757 1.30195 16.3849 1.17059 15.4079C1.04296 14.4585 1.04297 13.2455 1.04298 11.714L1.04298 5.7918C1.04298 5.76632 1.04298 5.74119 1.04298 5.7164C1.04288 5.05314 1.04282 4.63104 1.11161 4.26645C1.41372 2.66523 2.6662 1.41274 4.26743 1.11063C4.63201 1.04185 5.05412 1.04191 5.71737 1.042ZM15.9575 4.44006C15.7426 3.75275 15.1457 3.23788 14.4127 3.14138C14.3011 3.12669 14.1582 3.12534 13.7513 3.12534H9.84408C10.3798 3.6579 10.6229 3.88031 10.8986 4.0337C11.0803 4.13478 11.273 4.2146 11.4729 4.27159C11.8174 4.36977 12.195 4.37534 13.1917 4.37534L13.5455 4.37534C14.514 4.37533 15.3112 4.37532 15.9575 4.44006ZM5.79277 2.29201C5.0289 2.29201 4.73358 2.29474 4.49918 2.33896C3.40361 2.54567 2.54665 3.40263 2.33994 4.4982C2.29571 4.7326 2.29298 5.02793 2.29298 5.7918V11.667C2.29298 13.256 2.29431 14.3849 2.40945 15.2413C2.52217 16.0797 2.73356 16.5627 3.08624 16.9154C3.43891 17.2681 3.92195 17.4795 4.76036 17.5922C5.61674 17.7073 6.74563 17.7087 8.33465 17.7087H11.668C13.257 17.7087 14.3859 17.7073 15.2423 17.5922C16.0807 17.4795 16.5637 17.2681 16.9164 16.9154C17.2691 16.5627 17.4805 16.0797 17.5932 15.2413C17.7083 14.3849 17.7097 13.256 17.7097 11.667V9.83193C17.7097 8.71872 17.7085 7.94241 17.6344 7.35293C17.5622 6.77906 17.4297 6.46996 17.2287 6.24648C17.1845 6.1973 17.1377 6.15049 17.0885 6.10626C16.865 5.90526 16.5559 5.77276 15.9821 5.70061C15.3926 5.6265 14.6163 5.62534 13.5031 5.62534H13.1917C13.1607 5.62534 13.13 5.62535 13.0998 5.62535C12.2265 5.62553 11.6633 5.62564 11.1303 5.47371C10.8381 5.39042 10.5564 5.27375 10.2909 5.12602C9.80655 4.85655 9.4084 4.45824 8.79101 3.8406C8.76962 3.8192 8.74797 3.79754 8.72604 3.77562L8.2675 3.31707C8.03143 3.08101 7.94112 2.99158 7.84906 2.91527C7.42966 2.5676 6.91517 2.35449 6.37277 2.30377C6.25371 2.29264 6.12662 2.29201 5.79277 2.29201ZM10.2096 8.33367C10.2096 7.98849 10.4895 7.70867 10.8346 7.70867H15.0013C15.3465 7.70867 15.6263 7.98849 15.6263 8.33367C15.6263 8.67885 15.3465 8.95867 15.0013 8.95867H10.8346C10.4895 8.95867 10.2096 8.67885 10.2096 8.33367Z"
                    fill="#5750F1"
                  />
                </svg>
              </span>
              All Forms
            </a>
          </button>
        </div>
        <div className="flex items-center justify-end space-x-3.5">
          {/* {isFormsPage ? ( */}
          <button onClick={(e) => handelOpenCustomCreateModal(e)}>
            <a className="inline-flex h-10 items-center justify-center rounded-lg bg-primary px-5 font-heading text-sm font-medium text-white duration-300 hover:bg-fb-primary-hover">
              <span className="pr-2">
                <svg
                  width="21"
                  height="20"
                  viewBox="0 0 21 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M11.0716 7.50033C11.0716 7.15515 10.7918 6.87533 10.4466 6.87533C10.1014 6.87533 9.82162 7.15515 9.82162 7.50033L9.82161 9.37535H7.94661C7.60144 9.37535 7.32161 9.65517 7.32161 10.0003C7.32161 10.3455 7.60144 10.6253 7.94661 10.6253H9.82161V12.5003C9.82161 12.8455 10.1014 13.1253 10.4466 13.1253C10.7918 13.1253 11.0716 12.8455 11.0716 12.5003L11.0716 10.6253H12.9466C13.2918 10.6253 13.5716 10.3455 13.5716 10.0003C13.5716 9.65517 13.2918 9.37535 12.9466 9.37535H11.0716V7.50033Z"
                    fill="white"
                  />
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M10.4466 1.04199C5.49906 1.04199 1.48828 5.05277 1.48828 10.0003C1.48828 14.9479 5.49906 18.9587 10.4466 18.9587C15.3942 18.9587 19.4049 14.9479 19.4049 10.0003C19.4049 5.05277 15.3942 1.04199 10.4466 1.04199ZM2.73828 10.0003C2.73828 5.74313 6.18942 2.29199 10.4466 2.29199C14.7038 2.29199 18.1549 5.74313 18.1549 10.0003C18.1549 14.2575 14.7038 17.7087 10.4466 17.7087C6.18942 17.7087 2.73828 14.2575 2.73828 10.0003Z"
                    fill="white"
                  />
                </svg>
              </span>
              Create Form
            </a>
          </button>
          {/* ) : ( */}
          {/* <button onClick={() => handelCreateNewForm()}>
            <a className="inline-flex h-10 items-center justify-center rounded-lg bg-primary px-5 font-heading text-sm font-medium text-white duration-300 hover:bg-fb-primary-hover">
              <span className="pr-2">
                <svg
                  width="21"
                  height="20"
                  viewBox="0 0 21 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M11.0716 7.50033C11.0716 7.15515 10.7918 6.87533 10.4466 6.87533C10.1014 6.87533 9.82162 7.15515 9.82162 7.50033L9.82161 9.37535H7.94661C7.60144 9.37535 7.32161 9.65517 7.32161 10.0003C7.32161 10.3455 7.60144 10.6253 7.94661 10.6253H9.82161V12.5003C9.82161 12.8455 10.1014 13.1253 10.4466 13.1253C10.7918 13.1253 11.0716 12.8455 11.0716 12.5003L11.0716 10.6253H12.9466C13.2918 10.6253 13.5716 10.3455 13.5716 10.0003C13.5716 9.65517 13.2918 9.37535 12.9466 9.37535H11.0716V7.50033Z"
                    fill="white"
                  />
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M10.4466 1.04199C5.49906 1.04199 1.48828 5.05277 1.48828 10.0003C1.48828 14.9479 5.49906 18.9587 10.4466 18.9587C15.3942 18.9587 19.4049 14.9479 19.4049 10.0003C19.4049 5.05277 15.3942 1.04199 10.4466 1.04199ZM2.73828 10.0003C2.73828 5.74313 6.18942 2.29199 10.4466 2.29199C14.7038 2.29199 18.1549 5.74313 18.1549 10.0003C18.1549 14.2575 14.7038 17.7087 10.4466 17.7087C6.18942 17.7087 2.73828 14.2575 2.73828 10.0003Z"
                    fill="white"
                  />
                </svg>
              </span>
              Create Form With Builder
            </a>
          </button> */}
          {/* )} */}
        </div>
      </div>
      {showFormCreateModal && (
        <CreateModal
          show={showFormCreateModal}
          closeModal={() => {
            setShowFormCreateModal(false);
          }}
        />
      )}
    </>
  );
};

export default CreateFormBar;
